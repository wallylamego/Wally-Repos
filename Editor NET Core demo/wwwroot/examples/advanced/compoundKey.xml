<?xml version="1.0" encoding="UTF-8" ?>
<dt-example table-type="ajax" order="9">

<css lib="datatables buttons select editor" />
<js lib="jquery datatables buttons select editor">
<![CDATA[

var editor; // use a global for the submit and return data rendering in the examples

$(document).ready(function() {
	editor = new $.fn.dataTable.Editor( {
		ajax: '../php/compoundKey.php',
		table: '#example',
		fields: [ {
				label: 'Staff member:',
				name: 'users_visits.user_id',
				type: 'select'
			}, {
				label: 'Visiting site:',
				name: 'users_visits.site_id',
				type: 'select'
			}, {
				label: 'Date:',
				name: 'users_visits.visit_date',
				type: 'datetime'
			}
		]
	} );

	$('#example').DataTable( {
		dom: 'Bfrtip',
		ajax: {
			url: '../php/compoundKey.php',
			type: 'POST'
		},
		columns: [
			{ data: null, render: function ( data, type, row ) {
				return data.users.first_name+' '+data.users.last_name;
			} },
			{ data: 'sites.name' },
			{ data: 'users_visits.visit_date' }
		],
		select: true,
		buttons: [
			{ extend: 'create', editor: editor },
			{ extend: 'edit',   editor: editor },
			{ extend: 'remove', editor: editor }
		]
	} );
} );

]]>
</js>

<title lib="Editor">Compound database primary key</title>

<info><![CDATA[

Editor's PHP, .NET and NodeJS server-side libraries support the use of [compound keys](https://en.wikipedia.org/wiki/Compound_key) (as of v1.6). On the client-side no special configuration is required, while on the server-side you simply need to use an array as the optional third parameter for the `Editor` class constructor with the column names that make up the primary key.

It is important to note that when designing a form that uses a compound key, the data that makes up the primary key must either be included in the form, or generated in the server-side script. It cannot currently use data generated by the database.

In this example the staff member id and the date make up the compound primary key for the `users_vists` database table.

]]></info>

<custom-table>
	<table id="example" class="display" cellspacing="0" width="100%">
		<thead>
			<tr>
				<th>Name</th>
				<th>Site</th>
				<th>Visit date</th>
			</tr>
		</thead>

		<tfoot>
			<tr>
				<th>Name</th>
				<th>Site</th>
				<th>Visit date</th>
			</tr>
		</tfoot>
	</table>
</custom-table>

</dt-example>

